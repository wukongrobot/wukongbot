# æ‚Ÿç©ºBot å›½äº§åŒ–å¼€å‘ä»»åŠ¡æ¸…å•

## ğŸ¯ æ€»ä½“ç›®æ ‡

å°† Moltbot æ”¹é€ ä¸ºé€‚åˆä¸­å›½ç”¨æˆ·çš„ WukongBot:
1. âœ… æ”¯æŒæ¥å…¥å›½å†… IM å¹³å°(é£ä¹¦ã€ä¼ä¸šå¾®ä¿¡ã€é’‰é’‰)
2. âœ… æ”¯æŒæ¥å…¥å›½äº§å¤§æ¨¡å‹(DeepSeekã€åƒé—®ã€Kimiã€è±†åŒ…ã€ç¡…åŸºæµåŠ¨)
3. âœ… ç®€åŒ–å®‰è£…æµç¨‹,æ›´å›½äº§åŒ–
4. âœ… å®Œå–„ä¸­æ–‡æ–‡æ¡£

## ğŸ“‹ ä»»åŠ¡åˆ†è§£

### é˜¶æ®µä¸€: é¡¹ç›®åŸºç¡€æ”¹é€  âœ…

- [x] ä¿®æ”¹ README ä¸º WukongBot ä»‹ç»
- [x] åˆ›å»ºæ¶æ„æ–‡æ¡£ (ARCHITECTURE_CN.md)
- [x] åˆ›å»ºå¼€å‘ä»»åŠ¡æ¸…å• (TODO_CN.md)
- [ ] æ›´æ–° package.json é¡¹ç›®ä¿¡æ¯
  - [ ] ä¿®æ”¹ name: "wukongbot"
  - [ ] ä¿®æ”¹ description
  - [ ] ä¿®æ”¹ repository URL
  - [ ] ä¿®æ”¹ author
- [ ] å…¨å±€æ›¿æ¢ moltbot -> wukongbot
  - [ ] æºä»£ç ä¸­çš„å¼•ç”¨
  - [ ] é…ç½®æ–‡ä»¶è·¯å¾„ (~/.clawdbot -> ~/.wukongbot)
  - [ ] CLI å‘½ä»¤åç§°
- [ ] æ·»åŠ ä¸­æ–‡ LICENSE (MIT)
- [ ] åˆ›å»º CONTRIBUTING_CN.md

### é˜¶æ®µäºŒ: å›½äº§å¤§æ¨¡å‹é›†æˆ (ä¼˜å…ˆçº§é«˜)

#### 2.1 DeepSeek âœ… (å·²é€šè¿‡é…ç½®æ”¯æŒ)
- [x] åŸºç¡€é…ç½®æ”¯æŒ
- [ ] OAuth è®¤è¯(å¦‚éœ€è¦)
- [ ] ä¸“é¡¹æµ‹è¯•
- [ ] ä½¿ç”¨æ–‡æ¡£

#### 2.2 åƒé—®/é€šä¹‰åƒé—® (Qwen) âœ… (å·²æ”¯æŒ)
- [x] åŸºç¡€é…ç½®æ”¯æŒ
- [ ] OAuth è®¤è¯é›†æˆ
  - [ ] å‚è€ƒ: `src/providers/qwen-portal-oauth.ts` (å·²å­˜åœ¨!)
  - [ ] å®Œå–„è®¤è¯æµç¨‹
- [ ] ä¸“é¡¹æµ‹è¯•
- [ ] ä½¿ç”¨æ–‡æ¡£

#### 2.3 Kimi (æœˆä¹‹æš—é¢) âœ… (å·²æ”¯æŒ)
- [x] åŸºç¡€é…ç½®æ”¯æŒ
- [ ] ä¸“é¡¹æµ‹è¯•
- [ ] ä½¿ç”¨æ–‡æ¡£

#### 2.4 è±†åŒ… (å­—èŠ‚è·³åŠ¨) âœ… (å·²æ”¯æŒ)
- [x] åŸºç¡€é…ç½®æ”¯æŒ
- [ ] ä¸“é¡¹æµ‹è¯•
- [ ] ä½¿ç”¨æ–‡æ¡£

#### 2.5 ç¡…åŸºæµåŠ¨ (Silicon Flow) âœ… (å·²æ”¯æŒ)
- [x] åŸºç¡€é…ç½®æ”¯æŒ(æ”¯æŒå¤šæ¨¡å‹ä»£ç†)
- [ ] ä¸“é¡¹æµ‹è¯•
- [ ] ä½¿ç”¨æ–‡æ¡£

#### 2.6 æ™ºè°± GLM (å¾…å¼€å‘)
- [ ] åˆ›å»ºæä¾›å•†é…ç½®
  - [ ] æ–‡ä»¶: `src/agents/models-config.providers.ts`
  - [ ] æ·»åŠ  `resolveImplicitGLMProvider`
- [ ] æ³¨å†Œåˆ° `resolveImplicitProviders`
- [ ] é…ç½®ç±»å‹å®šä¹‰
- [ ] æµ‹è¯•ç”¨ä¾‹
- [ ] ä½¿ç”¨æ–‡æ¡£

#### 2.7 ç™¾å· (å¾…å¼€å‘)
- [ ] åˆ›å»ºæä¾›å•†é…ç½®
- [ ] æ³¨å†Œåˆ°ç³»ç»Ÿ
- [ ] æµ‹è¯•ç”¨ä¾‹
- [ ] ä½¿ç”¨æ–‡æ¡£

### é˜¶æ®µä¸‰: å›½äº§ IM å¹³å°é›†æˆ (ä¼˜å…ˆçº§é«˜)

#### 3.1 é£ä¹¦/Lark (ä¼˜å…ˆçº§:â˜…â˜…â˜…â˜…â˜…)

**å®ç°æ–¹å¼**: ä½œä¸ºæ‰©å±•æ’ä»¶(å‚è€ƒ msteams)

**ä»»åŠ¡æ¸…å•**:
- [ ] **å‰æœŸå‡†å¤‡**
  - [ ] ç ”ç©¶é£ä¹¦ API æ–‡æ¡£
    - [ ] Bot åˆ›å»ºå’Œé…ç½®
    - [ ] æ¶ˆæ¯æ¥æ”¶ Webhook
    - [ ] æ¶ˆæ¯å‘é€ API
    - [ ] æ–‡ä»¶ä¸Šä¼ ä¸‹è½½
    - [ ] ç¾¤ç»„ç®¡ç†
  - [ ] ç”³è¯·æµ‹è¯•è´¦å·å’Œåº”ç”¨

- [ ] **æ ¸å¿ƒå¼€å‘** (`extensions/feishu/`)
  ```
  extensions/feishu/
  â”œâ”€â”€ clawdbot.plugin.json   # æ’ä»¶å…ƒæ•°æ®
  â”œâ”€â”€ package.json            # ä¾èµ–: @larksuiteoapi/node-sdk
  â”œâ”€â”€ index.ts                # æ’ä»¶å…¥å£
  â””â”€â”€ src/
      â”œâ”€â”€ channel.ts          # Channel å®ç°
      â”œâ”€â”€ runtime.ts          # è¿è¡Œæ—¶
      â”œâ”€â”€ types.ts            # ç±»å‹å®šä¹‰
      â”œâ”€â”€ sdk.ts              # Lark SDK å°è£…
      â”œâ”€â”€ inbound.ts          # å…¥ç«™æ¶ˆæ¯å¤„ç†
      â”œâ”€â”€ outbound.ts         # å‡ºç«™æ¶ˆæ¯å‘é€
      â”œâ”€â”€ attachments.ts      # æ–‡ä»¶å¤„ç†
      â”œâ”€â”€ onboarding.ts       # å¼•å¯¼é…ç½®
      â”œâ”€â”€ probe.ts            # çŠ¶æ€æ¢æµ‹
      â””â”€â”€ monitor.ts          # æ¶ˆæ¯ç›‘æ§
  ```

  - [ ] åˆ›å»ºç›®å½•ç»“æ„
  - [ ] å®ç° `clawdbot.plugin.json`
  - [ ] å®ç° `sdk.ts` - é£ä¹¦ SDK å°è£…
    ```typescript
    import * as lark from '@larksuiteoapi/node-sdk';
    
    export function createFeishuClient(config: {
      appId: string;
      appSecret: string;
    }) {
      return new lark.Client({
        appId: config.appId,
        appSecret: config.appSecret,
      });
    }
    ```
  
  - [ ] å®ç° `inbound.ts` - å…¥ç«™æ¶ˆæ¯å¤„ç†
    - [ ] Webhook æ¥æ”¶
    - [ ] æ¶ˆæ¯æ ¼å¼è½¬æ¢
    - [ ] æ–‡ä»¶ä¸‹è½½
    - [ ] ç¾¤ç»„æ¶ˆæ¯å¤„ç†
  
  - [ ] å®ç° `outbound.ts` - å‡ºç«™æ¶ˆæ¯å‘é€
    - [ ] æ–‡æœ¬æ¶ˆæ¯
    - [ ] å›¾ç‰‡/æ–‡ä»¶
    - [ ] å¯Œæ–‡æœ¬/å¡ç‰‡
    - [ ] @æåŠ
  
  - [ ] å®ç° `channel.ts` - Channel æ¥å£
    ```typescript
    import type { ChannelPlugin } from "clawdbot/plugin-sdk";
    
    export const feishuPlugin: ChannelPlugin = {
      id: "feishu",
      meta: {
        name: "é£ä¹¦",
        order: 10,
      },
      async onboard(config, runtime, prompter) {
        // å¼•å¯¼é…ç½®
      },
      async probe(config) {
        // æ¢æµ‹çŠ¶æ€
      },
      async send(message, config) {
        // å‘é€æ¶ˆæ¯
      },
      async monitor(config, runtime) {
        // å¯åŠ¨ç›‘æ§
      },
    };
    ```
  
  - [ ] å®ç° `onboarding.ts` - å¼•å¯¼é…ç½®
  - [ ] å®ç° `monitor.ts` - æ¶ˆæ¯ç›‘æ§

- [ ] **é…ç½®ç±»å‹**
  - [ ] åˆ›å»º `src/config/types.feishu.ts`
    ```typescript
    export type FeishuConfig = {
      appId: string;
      appSecret: string;
      encryptKey?: string;
      verificationToken?: string;
      allowFrom?: string[];
      groups?: Record<string, { requireMention?: boolean }>;
    };
    ```
  - [ ] æ·»åŠ åˆ° `src/config/types.ts`

- [ ] **æµ‹è¯•**
  - [ ] å•å…ƒæµ‹è¯•
  - [ ] é›†æˆæµ‹è¯•
  - [ ] çœŸå®ç¯å¢ƒæµ‹è¯•

- [ ] **æ–‡æ¡£**
  - [ ] API ä½¿ç”¨æ–‡æ¡£
  - [ ] é…ç½®ç¤ºä¾‹
  - [ ] æ•…éšœæ’æŸ¥

#### 3.2 ä¼ä¸šå¾®ä¿¡/WeCom (ä¼˜å…ˆçº§:â˜…â˜…â˜…â˜…â˜†)

**å®ç°æ–¹å¼**: ä½œä¸ºæ‰©å±•æ’ä»¶

**ä»»åŠ¡æ¸…å•**:
- [ ] **å‰æœŸå‡†å¤‡**
  - [ ] ç ”ç©¶ä¼ä¸šå¾®ä¿¡ API
  - [ ] ç”³è¯·æµ‹è¯•ä¼ä¸š

- [ ] **æ ¸å¿ƒå¼€å‘** (`extensions/wecom/`)
  ```
  extensions/wecom/
  â”œâ”€â”€ clawdbot.plugin.json
  â”œâ”€â”€ package.json           # ä¾èµ–: @wecom/jssdk
  â”œâ”€â”€ index.ts
  â””â”€â”€ src/
      â”œâ”€â”€ channel.ts
      â”œâ”€â”€ sdk.ts
      â”œâ”€â”€ inbound.ts
      â”œâ”€â”€ outbound.ts
      â”œâ”€â”€ attachments.ts
      â””â”€â”€ ...
  ```

  - [ ] åˆ›å»ºç›®å½•ç»“æ„
  - [ ] SDK å°è£…
  - [ ] æ¶ˆæ¯æ”¶å‘
  - [ ] Channel æ¥å£å®ç°

- [ ] **é…ç½®ç±»å‹**
  - [ ] `src/config/types.wecom.ts`

- [ ] **æµ‹è¯•å’Œæ–‡æ¡£**
  - [ ] æµ‹è¯•ç”¨ä¾‹
  - [ ] ä½¿ç”¨æ–‡æ¡£

#### 3.3 é’‰é’‰/DingTalk (ä¼˜å…ˆçº§:â˜…â˜…â˜…â˜…â˜†)

**å®ç°æ–¹å¼**: ä½œä¸ºæ‰©å±•æ’ä»¶

**ä»»åŠ¡æ¸…å•**:
- [ ] **å‰æœŸå‡†å¤‡**
  - [ ] ç ”ç©¶é’‰é’‰å¼€æ”¾å¹³å°
  - [ ] ç”³è¯·æµ‹è¯•åº”ç”¨

- [ ] **æ ¸å¿ƒå¼€å‘** (`extensions/dingtalk/`)
  ```
  extensions/dingtalk/
  â”œâ”€â”€ clawdbot.plugin.json
  â”œâ”€â”€ package.json           # ä¾èµ–: dingtalk-sdk
  â”œâ”€â”€ index.ts
  â””â”€â”€ src/
      â”œâ”€â”€ channel.ts
      â”œâ”€â”€ sdk.ts
      â”œâ”€â”€ inbound.ts
      â”œâ”€â”€ outbound.ts
      â””â”€â”€ ...
  ```

  - [ ] åˆ›å»ºç›®å½•ç»“æ„
  - [ ] SDK å°è£…
  - [ ] æ¶ˆæ¯æ”¶å‘
  - [ ] Channel æ¥å£å®ç°

- [ ] **é…ç½®ç±»å‹**
  - [ ] `src/config/types.dingtalk.ts`

- [ ] **æµ‹è¯•å’Œæ–‡æ¡£**
  - [ ] æµ‹è¯•ç”¨ä¾‹
  - [ ] ä½¿ç”¨æ–‡æ¡£

### é˜¶æ®µå››: ç®€åŒ–å®‰è£… (ä¼˜å…ˆçº§ä¸­)

#### 4.1 ä¸€é”®å®‰è£…è„šæœ¬
- [ ] **Linux å®‰è£…è„šæœ¬** (`scripts/install-linux.sh`)
  ```bash
  #!/bin/bash
  # æ£€æµ‹ç³»ç»Ÿ
  # å®‰è£… Node.js (å¦‚éœ€è¦)
  # å®‰è£… WukongBot
  # é…ç½®å®ˆæŠ¤è¿›ç¨‹
  # å¯åŠ¨æœåŠ¡
  ```

- [ ] **macOS å®‰è£…è„šæœ¬** (`scripts/install-macos.sh`)

- [ ] **Windows å®‰è£…è„šæœ¬** (`scripts/install-windows.ps1`)

#### 4.2 Docker æ”¯æŒ
- [ ] **ä¼˜åŒ– Dockerfile**
  - [ ] å¤šé˜¶æ®µæ„å»º
  - [ ] å‡å°é•œåƒå¤§å°
  - [ ] ä¸­å›½é•œåƒæº
  
- [ ] **Docker Compose**
  ```yaml
  version: '3.8'
  services:
    wukongbot:
      image: wukongbot/wukongbot:latest
      environment:
        - NODE_ENV=production
      volumes:
        - ./config:/root/.wukongbot
      ports:
        - "18789:18789"
  ```

- [ ] **å‘å¸ƒåˆ° Docker Hub**
  - [ ] è‡ªåŠ¨åŒ–æ„å»º
  - [ ] ç‰ˆæœ¬æ ‡ç­¾ç®¡ç†

#### 4.3 Web ç®¡ç†ç•Œé¢
- [ ] **è®¾è®¡ç•Œé¢** (ä½¿ç”¨ `ui/` ç›®å½•)
  - [ ] ä»ªè¡¨æ¿
  - [ ] é¢‘é“ç®¡ç†
  - [ ] æ¨¡å‹é…ç½®
  - [ ] æ—¥å¿—æŸ¥çœ‹

- [ ] **å®ç°å‰ç«¯**
  - [ ] React/Vue ç»„ä»¶
  - [ ] API è°ƒç”¨
  - [ ] å®æ—¶æ›´æ–° (WebSocket)

- [ ] **åç«¯ API**
  - [ ] é…ç½® CRUD
  - [ ] çŠ¶æ€æŸ¥è¯¢
  - [ ] æ—¥å¿—æ¥å£

### é˜¶æ®µäº”: æ–‡æ¡£å’Œç¤¾åŒº (æŒç»­è¿›è¡Œ)

#### 5.1 ä¸­æ–‡æ–‡æ¡£
- [ ] **ç”¨æˆ·æ–‡æ¡£**
  - [ ] å¿«é€Ÿå¼€å§‹
  - [ ] å®‰è£…æŒ‡å—
  - [ ] é…ç½®æŒ‡å—
  - [ ] å¸¸è§é—®é¢˜
  - [ ] æ•…éšœæ’æŸ¥

- [ ] **å¼€å‘æ–‡æ¡£**
  - [x] æ¶æ„æ–‡æ¡£ (ARCHITECTURE_CN.md)
  - [ ] API å‚è€ƒ
  - [ ] æ’ä»¶å¼€å‘æŒ‡å—
  - [ ] è´¡çŒ®æŒ‡å—

- [ ] **è§†é¢‘æ•™ç¨‹**
  - [ ] å¿«é€Ÿä¸Šæ‰‹
  - [ ] æ¥å…¥é£ä¹¦
  - [ ] é…ç½®å¤§æ¨¡å‹

#### 5.2 ç¤¾åŒºå»ºè®¾
- [ ] **GitHub**
  - [ ] Issue æ¨¡æ¿(ä¸­æ–‡)
  - [ ] PR æ¨¡æ¿(ä¸­æ–‡)
  - [ ] GitHub Actions CI

- [ ] **äº¤æµå¹³å°**
  - [ ] åˆ›å»º QQ ç¾¤
  - [ ] åˆ›å»ºå¾®ä¿¡äº¤æµç¾¤
  - [ ] å»ºç«‹é£ä¹¦ç¾¤ç»„

- [ ] **ç½‘ç«™**
  - [ ] å®˜æ–¹ç½‘ç«™ (wukongbot.cn)
  - [ ] æ–‡æ¡£ç«™ç‚¹
  - [ ] åšå®¢

### é˜¶æ®µå…­: æµ‹è¯•å’Œä¼˜åŒ– (æŒç»­è¿›è¡Œ)

#### 6.1 æµ‹è¯•è¦†ç›–
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 70%
- [ ] é›†æˆæµ‹è¯•
- [ ] E2E æµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•

#### 6.2 æ€§èƒ½ä¼˜åŒ–
- [ ] æ¶ˆæ¯å¤„ç†æ€§èƒ½
- [ ] å†…å­˜å ç”¨ä¼˜åŒ–
- [ ] å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–

#### 6.3 ç¨³å®šæ€§
- [ ] é”™è¯¯æ¢å¤æœºåˆ¶
- [ ] æ—¥å¿—å’Œç›‘æ§
- [ ] æ•…éšœå‘Šè­¦

## ğŸ¯ å¼€å‘ä¼˜å…ˆçº§

### Sprint 1 (ç¬¬1-2å‘¨)
1. âœ… é¡¹ç›®åŸºç¡€æ”¹é€ 
2. âœ… DeepSeek/åƒé—®/Kimi ç­‰æ¨¡å‹é…ç½®æ–‡æ¡£
3. é£ä¹¦é›†æˆå¼€å‘(SDK å°è£… + åŸºç¡€æ¶ˆæ¯æ”¶å‘)

### Sprint 2 (ç¬¬3-4å‘¨)
1. é£ä¹¦é›†æˆå®Œæˆ(æ–‡ä»¶å¤„ç† + ç¾¤ç»„åŠŸèƒ½)
2. ä¼ä¸šå¾®ä¿¡é›†æˆå¼€å§‹
3. ä¸€é”®å®‰è£…è„šæœ¬(Linux)

### Sprint 3 (ç¬¬5-6å‘¨)
1. ä¼ä¸šå¾®ä¿¡é›†æˆå®Œæˆ
2. é’‰é’‰é›†æˆå¼€å§‹
3. Docker é•œåƒä¼˜åŒ–
4. ä¸­æ–‡æ–‡æ¡£å®Œå–„

### Sprint 4 (ç¬¬7-8å‘¨)
1. é’‰é’‰é›†æˆå®Œæˆ
2. Web ç®¡ç†ç•Œé¢
3. å…¨é¢æµ‹è¯•
4. é¦–ä¸ªæ­£å¼ç‰ˆæœ¬å‘å¸ƒ

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
- TypeScript strict æ¨¡å¼
- ESLint + Prettier
- å•å…ƒæµ‹è¯•å¿…é¡»é€šè¿‡
- æäº¤ä¿¡æ¯éµå¾ª Conventional Commits

### åˆ†æ”¯ç­–ç•¥
- `main`: ä¸»åˆ†æ”¯,ç¨³å®šç‰ˆæœ¬
- `dev`: å¼€å‘åˆ†æ”¯
- `feature/*`: åŠŸèƒ½åˆ†æ”¯
- `fix/*`: ä¿®å¤åˆ†æ”¯

### æäº¤è§„èŒƒ
```
feat: æ·»åŠ é£ä¹¦é›†æˆ
fix: ä¿®å¤åƒé—®æ¨¡å‹é…ç½®é—®é¢˜
docs: æ›´æ–°å®‰è£…æ–‡æ¡£
test: æ·»åŠ é£ä¹¦é›†æˆæµ‹è¯•
refactor: é‡æ„ Channel æ’ä»¶æ¥å£
```

## ğŸ¤ åä½œæ–¹å¼

### ä»»åŠ¡è®¤é¢†
1. åœ¨ GitHub Issues ä¸­åˆ›å»ºä»»åŠ¡
2. æ ‡è®°ä¼˜å…ˆçº§å’Œç±»å‹
3. è®¤é¢†ä»»åŠ¡å¹¶å¼€å§‹å¼€å‘
4. æäº¤ PR ç­‰å¾… Review

### Code Review
- è‡³å°‘ä¸€äºº Review
- é€šè¿‡æ‰€æœ‰æµ‹è¯•
- è§£å†³æ‰€æœ‰è®¨è®º
- Squash merge åˆ° dev

## ğŸ“ è”ç³»æ–¹å¼

- GitHub Issues: æŠ€æœ¯é—®é¢˜å’Œ Bug
- GitHub Discussions: è®¨è®ºå’Œå»ºè®®
- QQ ç¾¤: (å¾…å»ºç«‹)
- å¾®ä¿¡ç¾¤: (å¾…å»ºç«‹)

---

æœ€åæ›´æ–°: 2026-01-28
