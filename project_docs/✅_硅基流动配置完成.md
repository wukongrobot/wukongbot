# âœ… ç¡…åŸºæµåŠ¨é…ç½®å®Œæˆ

## ğŸ‰ é…ç½®æˆåŠŸï¼

ç¡…åŸºæµåŠ¨ï¼ˆDeepSeek V3ï¼‰å·²ç»æˆåŠŸé…ç½®å¹¶å¯åŠ¨ã€‚

---

## ğŸ“‹ é…ç½®ä¿¡æ¯

### API è®¤è¯
- **API Key**: `sk-fymrvjkuzxgqxmzctrbhwitoapmefcjnmabsgrogpqvwqbyd`
- **å­˜å‚¨ä½ç½®**: `~/.clawdbot/.env`
- **ç¯å¢ƒå˜é‡**: `OPENAI_API_KEY`

### æ¨¡å‹é…ç½®
- **æ¨¡å‹åç§°**: `deepseek-ai/DeepSeek-V3`
- **API ç«¯ç‚¹**: `https://api.siliconflow.cn/v1`
- **æä¾›å•†**: ç¡…åŸºæµåŠ¨ï¼ˆSiliconFlowï¼‰

### å®Œæ•´é…ç½®
```json
{
  "agents": {
    "defaults": {
      "model": {
        "primary": "deepseek-ai/DeepSeek-V3"
      },
      "models": {
        "deepseek-ai/DeepSeek-V3": {}
      },
      "workspace": "/root/clawd"
    }
  },
  "env": {
    "OPENAI_BASE_URL": "https://api.siliconflow.cn/v1"
  }
}
```

---

## âœ… ç½‘å…³çŠ¶æ€

```
[gateway] agent model: deepseek-ai/DeepSeek-V3
[gateway] listening on ws://127.0.0.1:18789 (PID 6398)
```

- âœ… ç½‘å…³æˆåŠŸå¯åŠ¨
- âœ… æ¨¡å‹æ­£ç¡®åŠ è½½
- âœ… æ— é”™è¯¯ä¿¡æ¯

---

## ğŸš€ ç«‹å³æµ‹è¯•

### è®¿é—® Control UI

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼ˆå¸¦ tokenï¼‰ï¼š
```
http://127.0.0.1:18789/?token=1a1760cece3bcedbfda1f348b0671cd2d9d56f74c47a74a0
```

### æµ‹è¯•å¯¹è¯

1. **è¿›å…¥ Chat é¡µé¢**
   - ç‚¹å‡»é¡¶éƒ¨å¯¼èˆªçš„ "Chat" æ ‡ç­¾
   - æˆ–ç›´æ¥è®¿é—®ï¼šhttp://127.0.0.1:18789/chat?session=agent%3Amain%3Amain&token=1a1760cece3bcedbfda1f348b0671cd2d9d56f74c47a74a0

2. **å‘é€æµ‹è¯•æ¶ˆæ¯**
   ```
   ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±
   ```

3. **é¢„æœŸæ•ˆæœ**
   - âœ… æ¶ˆæ¯æˆåŠŸå‘é€
   - âœ… DeepSeek V3 è¿”å›å›å¤
   - âœ… æ— é”™è¯¯æç¤º
   - âœ… å¯¹è¯æ­£å¸¸è¿›è¡Œ

---

## ğŸ” æ•…éšœæ’æŸ¥

### å¦‚æœä»ç„¶æ— æ³•å¯¹è¯

#### 1. æ£€æŸ¥ç½‘å…³æ—¥å¿—
```bash
tail -f /tmp/wukongbot-gateway.log
```

å‘é€æ¶ˆæ¯æ—¶åº”è¯¥çœ‹åˆ°ï¼š
```
[agent] running turn...
[diagnostic] lane task success...
```

#### 2. æ£€æŸ¥ API Key æ˜¯å¦æœ‰æ•ˆ

```bash
# æµ‹è¯• API Key
curl -X POST https://api.siliconflow.cn/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk-fymrvjkuzxgqxmzctrbhwitoapmefcjnmabsgrogpqvwqbyd" \
  -d '{
    "model": "deepseek-ai/DeepSeek-V3",
    "messages": [{"role": "user", "content": "Hello"}],
    "max_tokens": 10
  }'
```

åº”è¯¥è¿”å›æ­£å¸¸çš„å“åº”ï¼ˆä¸æ˜¯ 401 Unauthorizedï¼‰ã€‚

#### 3. æ£€æŸ¥ç¯å¢ƒå˜é‡

```bash
# æŸ¥çœ‹ .env æ–‡ä»¶
cat ~/.clawdbot/.env

# åº”è¯¥åŒ…å«
OPENAI_API_KEY=sk-fymrvjkuzxgqxmzctrbhwitoapmefcjnmabsgrogpqvwqbyd
```

#### 4. æ£€æŸ¥é…ç½®

```bash
# æŸ¥çœ‹æ¨¡å‹é…ç½®
cat ~/.clawdbot/moltbot.json | jq '.agents.defaults.models'

# æŸ¥çœ‹ env é…ç½®
cat ~/.clawdbot/moltbot.json | jq '.env'
```

#### 5. æŸ¥çœ‹æ¨¡å‹çŠ¶æ€

```bash
pnpm wukongbot models status
```

åº”è¯¥æ˜¾ç¤º DeepSeek V3 å·²é…ç½®å¹¶å¯ç”¨ã€‚

---

## ğŸ“ é…ç½®è¯´æ˜

### é…ç½®åŸç†

1. **API Key å­˜å‚¨**
   - å­˜å‚¨åœ¨ `~/.clawdbot/.env` æ–‡ä»¶ä¸­
   - ä½œä¸ºç¯å¢ƒå˜é‡ `OPENAI_API_KEY`
   - ç½‘å…³å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½

2. **Base URL é…ç½®**
   - åœ¨é…ç½®æ–‡ä»¶çš„ `env` éƒ¨åˆ†è®¾ç½®
   - `OPENAI_BASE_URL` æŒ‡å‘ç¡…åŸºæµåŠ¨ API
   - è¦†ç›–é»˜è®¤çš„ OpenAI ç«¯ç‚¹

3. **æ¨¡å‹å£°æ˜**
   - åœ¨ `agents.defaults.models` ä¸­å£°æ˜ä½¿ç”¨çš„æ¨¡å‹
   - æ¨¡å‹é…ç½®ä¸ºç©ºå¯¹è±¡ `{}`
   - ç³»ç»Ÿä¼šè‡ªåŠ¨æŸ¥æ‰¾å¯¹åº”çš„è®¤è¯ä¿¡æ¯

### ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥åœ¨æ¨¡å‹é…ç½®ä¸­å†™ apiKeyï¼Ÿ

å› ä¸ºç³»ç»Ÿçš„é…ç½® schema ä¸æ”¯æŒåœ¨æ¨¡å‹é…ç½®ä¸­ç›´æ¥æ·»åŠ  `apiKey` å’Œ `baseURL`ã€‚æ­£ç¡®çš„æ–¹å¼æ˜¯ï¼š

- âœ… API Key â†’ ç¯å¢ƒå˜é‡ï¼ˆ`.env` æˆ– `config.env`ï¼‰
- âœ… Base URL â†’ é…ç½®æ–‡ä»¶çš„ `env` éƒ¨åˆ†
- âœ… æ¨¡å‹å£°æ˜ â†’ `agents.defaults.models` ä¸ºç©ºå¯¹è±¡

---

## ğŸ” å®‰å…¨æç¤º

### API Key å®‰å…¨
- âœ… API Key å·²å­˜å‚¨åœ¨ `.env` æ–‡ä»¶ä¸­
- âœ… `.env` æ–‡ä»¶æƒé™ä¸º 600ï¼ˆåªæœ‰æ‰€æœ‰è€…å¯è¯»å†™ï¼‰
- âœ… `.gitignore` å·²åŒ…å« `.env`ï¼ˆä¸ä¼šæäº¤åˆ° gitï¼‰
- âš ï¸ ä¸è¦å°† API Key æ³„éœ²æˆ–åˆ†äº«ç»™ä»–äºº

### å¤‡ä»½é…ç½®
```bash
# æŸ¥çœ‹å¤‡ä»½
ls -lah ~/.clawdbot/moltbot.json.backup*

# å¦‚éœ€æ¢å¤æ—§é…ç½®
cp ~/.clawdbot/moltbot.json.backup-20260128-132830 ~/.clawdbot/moltbot.json
```

---

## ğŸ¯ å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹æ¨¡å‹çŠ¶æ€
```bash
pnpm wukongbot models status
```

### åˆ‡æ¢æ¨¡å‹
```bash
pnpm wukongbot models set "Qwen/Qwen2.5-7B-Instruct"
```

### æŸ¥çœ‹æ—¥å¿—
```bash
tail -f /tmp/wukongbot-gateway.log
```

### é‡å¯ç½‘å…³
```bash
pkill -f "moltbot.*gateway"
pnpm wukongbot gateway run --port 18789
```

---

## ğŸ“š ä¸‹ä¸€æ­¥

### 1. æµ‹è¯•å¯¹è¯
è®¿é—®ï¼š
```
http://127.0.0.1:18789/?token=1a1760cece3bcedbfda1f348b0671cd2d9d56f74c47a74a0
```

### 2. é…ç½®æ›´å¤šæ¨¡å‹ï¼ˆå¯é€‰ï¼‰

å¦‚æœæƒ³ä½¿ç”¨å…¶ä»–ç¡…åŸºæµåŠ¨æ¨¡å‹ï¼Œæ·»åŠ åˆ°é…ç½®ï¼š

```json
{
  "agents": {
    "defaults": {
      "models": {
        "deepseek-ai/DeepSeek-V3": {},
        "Qwen/Qwen2.5-7B-Instruct": {},
        "THUDM/glm-4-9b-chat": {}
      }
    }
  }
}
```

æ‰€æœ‰æ¨¡å‹éƒ½ä¼šä½¿ç”¨ç›¸åŒçš„ API Key å’Œ Base URLã€‚

### 3. é…ç½®é¢‘é“ï¼ˆå¯é€‰ï¼‰

å¦‚éœ€é…ç½®é£ä¹¦ã€ä¼ä¸šå¾®ä¿¡ã€é’‰é’‰ç­‰ï¼š
```bash
pnpm wukongbot configure
```

---

## âœ¨ æ€»ç»“

- âœ… ç¡…åŸºæµåŠ¨ API Key å·²é…ç½®
- âœ… DeepSeek V3 æ¨¡å‹å·²å¯ç”¨
- âœ… Base URL å·²è®¾ç½®ä¸ºç¡…åŸºæµåŠ¨ç«¯ç‚¹
- âœ… ç½‘å…³æˆåŠŸå¯åŠ¨ï¼Œæ— é”™è¯¯
- âœ… å¯ä»¥å¼€å§‹å¯¹è¯æµ‹è¯•

**ç°åœ¨å» Control UI è¯•è¯•å¯¹è¯å§ï¼** ğŸŠ

---

**é…ç½®æ—¶é—´**: 2026-01-28  
**çŠ¶æ€**: âœ… å®Œå…¨é…ç½®  
**æ¨¡å‹**: deepseek-ai/DeepSeek-V3 (via SiliconFlow)
