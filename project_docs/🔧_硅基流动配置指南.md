# ğŸ”§ ç¡…åŸºæµåŠ¨æ¨¡å‹é…ç½®æŒ‡å—

## é—®é¢˜è¯Šæ–­

### å½“å‰çŠ¶æ€
```json
{
  "agents": {
    "defaults": {
      "model": {
        "primary": "deepseek-ai/DeepSeek-V3"
      },
      "models": {
        "deepseek-ai/DeepSeek-V3": {}
      }
    }
  }
}
```

### é”™è¯¯ä¿¡æ¯
```
Error: Unknown model: deepseek-ai/DeepSeek-V3
Embedded agent failed before reply: Unknown model: deepseek-ai/DeepSeek-V3
```

### é—®é¢˜åŸå› 
1. âŒ é…ç½®ä¸­ä½¿ç”¨äº† `deepseek-ai/DeepSeek-V3` æ¨¡å‹
2. âŒ **æ²¡æœ‰é…ç½®ä»»ä½• API key**
3. âŒ ç³»ç»Ÿæ‰¾ä¸åˆ°è¿™ä¸ªæ¨¡å‹çš„è®¤è¯ä¿¡æ¯

---

## âœ… è§£å†³æ–¹æ¡ˆï¼šé…ç½®ç¡…åŸºæµåŠ¨

### æ­¥éª¤ 1: è·å–ç¡…åŸºæµåŠ¨ API Key

å¦‚æœä½ è¿˜æ²¡æœ‰ï¼š
1. è®¿é—® https://siliconflow.cn/
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. è¿›å…¥æ§åˆ¶å°è·å– API Key

### æ­¥éª¤ 2: é…ç½® API Key

**æ–¹æ³• 1: ä½¿ç”¨ CLI å‘½ä»¤ï¼ˆæ¨èï¼‰**

```bash
cd /root/code/wukongbot

# é…ç½®ç¡…åŸºæµåŠ¨ API Key
pnpm wukongbot auth

# æˆ–è€…ç›´æ¥è®¾ç½®ç¯å¢ƒå˜é‡
export OPENAI_API_KEY="sk-ä½ çš„ç¡…åŸºæµåŠ¨APIå¯†é’¥"
```

**æ–¹æ³• 2: ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶**

ç¼–è¾‘ `~/.clawdbot/moltbot.json`ï¼Œæ·»åŠ ï¼š

```json
{
  "agents": {
    "defaults": {
      "model": {
        "primary": "Qwen/Qwen2.5-7B-Instruct"
      },
      "models": {
        "Qwen/Qwen2.5-7B-Instruct": {
          "apiKey": "sk-ä½ çš„ç¡…åŸºæµåŠ¨APIå¯†é’¥",
          "baseURL": "https://api.siliconflow.cn/v1"
        }
      }
    }
  }
}
```

### æ­¥éª¤ 3: ç¡…åŸºæµåŠ¨å¯ç”¨æ¨¡å‹

ç¡…åŸºæµåŠ¨æ”¯æŒå¤šç§æ¨¡å‹ï¼Œå¸¸ç”¨çš„æœ‰ï¼š

#### æ¨èæ¨¡å‹ï¼ˆæ€§ä»·æ¯”é«˜ï¼‰
```
Qwen/Qwen2.5-7B-Instruct       # é˜¿é‡Œé€šä¹‰åƒé—® 2.5ï¼Œ7B
Qwen/Qwen2.5-14B-Instruct      # é˜¿é‡Œé€šä¹‰åƒé—® 2.5ï¼Œ14B
deepseek-ai/DeepSeek-V3        # DeepSeek V3ï¼ˆéœ€è¦ç¡…åŸºæµåŠ¨æ”¯æŒï¼‰
```

#### å…¶ä»–å¯ç”¨æ¨¡å‹
```
THUDM/glm-4-9b-chat            # æ™ºè°± GLM-4
01-ai/Yi-1.5-9B-Chat           # é›¶ä¸€ä¸‡ç‰© Yi
internlm/internlm2_5-7b-chat   # ä¹¦ç”ŸÂ·æµ¦è¯­
```

### æ­¥éª¤ 4: å®Œæ•´é…ç½®ç¤ºä¾‹

**ç¤ºä¾‹ 1: ä½¿ç”¨é€šä¹‰åƒé—® 2.5**

```json
{
  "agents": {
    "defaults": {
      "model": {
        "primary": "Qwen/Qwen2.5-7B-Instruct"
      },
      "models": {
        "Qwen/Qwen2.5-7B-Instruct": {
          "apiKey": "${OPENAI_API_KEY}",
          "baseURL": "https://api.siliconflow.cn/v1"
        }
      },
      "workspace": "/root/clawd"
    }
  }
}
```

**ç¤ºä¾‹ 2: ä½¿ç”¨ç¯å¢ƒå˜é‡**

```bash
# 1. è®¾ç½®ç¯å¢ƒå˜é‡
export OPENAI_API_KEY="sk-ä½ çš„ç¡…åŸºæµåŠ¨APIå¯†é’¥"

# 2. é…ç½®æ–‡ä»¶ä½¿ç”¨ç¯å¢ƒå˜é‡
{
  "agents": {
    "defaults": {
      "model": {
        "primary": "Qwen/Qwen2.5-7B-Instruct"
      },
      "models": {
        "Qwen/Qwen2.5-7B-Instruct": {
          "apiKey": "${OPENAI_API_KEY}",
          "baseURL": "https://api.siliconflow.cn/v1"
        }
      }
    }
  }
}
```

**ç¤ºä¾‹ 3: é…ç½®å¤šä¸ªæ¨¡å‹**

```json
{
  "agents": {
    "defaults": {
      "model": {
        "primary": "Qwen/Qwen2.5-7B-Instruct"
      },
      "models": {
        "Qwen/Qwen2.5-7B-Instruct": {
          "apiKey": "${OPENAI_API_KEY}",
          "baseURL": "https://api.siliconflow.cn/v1"
        },
        "deepseek-ai/DeepSeek-V3": {
          "apiKey": "${OPENAI_API_KEY}",
          "baseURL": "https://api.siliconflow.cn/v1"
        },
        "THUDM/glm-4-9b-chat": {
          "apiKey": "${OPENAI_API_KEY}",
          "baseURL": "https://api.siliconflow.cn/v1"
        }
      }
    }
  }
}
```

---

## ğŸš€ å¿«é€Ÿé…ç½®å‘½ä»¤

### æ–¹æ³• A: ä½¿ç”¨ CLI äº¤äº’å¼é…ç½®

```bash
cd /root/code/wukongbot

# 1. è¿è¡Œè®¤è¯é…ç½®å‘å¯¼
pnpm wukongbot auth

# 2. é€‰æ‹© "SiliconFlow (ç¡…åŸºæµåŠ¨)"
# 3. é€‰æ‹© "API key (å¤šæ¨¡å‹æ”¯æŒ)"
# 4. è¾“å…¥ä½ çš„ API key
# 5. é€‰æ‹©æ¨¡å‹
```

### æ–¹æ³• B: ä½¿ç”¨å‘½ä»¤ç›´æ¥é…ç½®

```bash
cd /root/code/wukongbot

# è®¾ç½®ç¯å¢ƒå˜é‡
export OPENAI_API_KEY="sk-ä½ çš„APIå¯†é’¥"

# é…ç½®æ¨¡å‹
pnpm wukongbot config set agents.defaults.model.primary "Qwen/Qwen2.5-7B-Instruct"

# é…ç½®æ¨¡å‹å‚æ•°
pnpm wukongbot config set agents.defaults.models."Qwen/Qwen2.5-7B-Instruct".apiKey "\${OPENAI_API_KEY}"
pnpm wukongbot config set agents.defaults.models."Qwen/Qwen2.5-7B-Instruct".baseURL "https://api.siliconflow.cn/v1"

# åˆ é™¤æ—§çš„ DeepSeek é…ç½®
pnpm wukongbot config unset agents.defaults.models."deepseek-ai/DeepSeek-V3"
```

### æ–¹æ³• C: ç›´æ¥ç¼–è¾‘é…ç½®æ–‡ä»¶

```bash
# 1. å¤‡ä»½å½“å‰é…ç½®
cp ~/.clawdbot/moltbot.json ~/.clawdbot/moltbot.json.backup

# 2. ç¼–è¾‘é…ç½®
nano ~/.clawdbot/moltbot.json

# 3. ä¿®æ”¹ agents.defaults éƒ¨åˆ†ä¸ºä¸Šé¢çš„ç¤ºä¾‹

# 4. ä¿å­˜åé‡å¯ç½‘å…³
pkill -f "moltbot.*gateway"
pnpm wukongbot gateway run --port 18789
```

---

## ğŸ§ª æµ‹è¯•é…ç½®

### 1. é‡å¯ç½‘å…³

```bash
cd /root/code/wukongbot

# åœæ­¢æ—§ç½‘å…³
pkill -f "moltbot.*gateway"

# å¯åŠ¨æ–°ç½‘å…³
nohup pnpm wukongbot gateway run --port 18789 > /tmp/wukongbot-gateway.log 2>&1 &

# ç­‰å¾…å¯åŠ¨
sleep 5

# æŸ¥çœ‹æ—¥å¿—
tail -20 /tmp/wukongbot-gateway.log
```

### 2. éªŒè¯æ¨¡å‹é…ç½®

```bash
# æŸ¥çœ‹å½“å‰é…ç½®
pnpm wukongbot config get agents.defaults.model

# æŸ¥çœ‹æ¨¡å‹åˆ—è¡¨
cat ~/.clawdbot/moltbot.json | jq '.agents.defaults.models'
```

### 3. æµ‹è¯•å¯¹è¯

è®¿é—®ï¼š
```
http://127.0.0.1:18789/?token=1a1760cece3bcedbfda1f348b0671cd2d9d56f74c47a74a0
```

åœ¨ Chat é¡µé¢å‘é€æ¶ˆæ¯æµ‹è¯•ã€‚

### 4. æŸ¥çœ‹ç½‘å…³æ—¥å¿—

```bash
tail -f /tmp/wukongbot-gateway.log
```

åº”è¯¥çœ‹åˆ°ï¼š
```
[gateway] agent model: Qwen/Qwen2.5-7B-Instruct
```

è€Œä¸æ˜¯é”™è¯¯ä¿¡æ¯ã€‚

---

## â— å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•è·å–ç¡…åŸºæµåŠ¨ API Keyï¼Ÿ

**A**: 
1. è®¿é—® https://siliconflow.cn/
2. æ³¨å†Œè´¦å·
3. è¿›å…¥æ§åˆ¶å°
4. API ç®¡ç† â†’ åˆ›å»º API Key
5. å¤åˆ¶ API Keyï¼ˆæ ¼å¼ï¼š`sk-xxxxxxxxxx`ï¼‰

### Q2: ç¡…åŸºæµåŠ¨çš„ baseURL æ˜¯ä»€ä¹ˆï¼Ÿ

**A**: 
```
https://api.siliconflow.cn/v1
```

è¿™æ˜¯æ ‡å‡†çš„ OpenAI å…¼å®¹ API åœ°å€ã€‚

### Q3: å¯ä»¥ä½¿ç”¨å“ªäº›æ¨¡å‹ï¼Ÿ

**A**: ç¡…åŸºæµåŠ¨æ”¯æŒå¤šç§å¼€æºæ¨¡å‹ï¼š
- é€šä¹‰åƒé—®ç³»åˆ—ï¼š`Qwen/Qwen2.5-7B-Instruct`
- DeepSeek ç³»åˆ—ï¼š`deepseek-ai/DeepSeek-V3`ï¼ˆå¦‚æœæ”¯æŒï¼‰
- GLM ç³»åˆ—ï¼š`THUDM/glm-4-9b-chat`
- Yi ç³»åˆ—ï¼š`01-ai/Yi-1.5-9B-Chat`

æŸ¥çœ‹å®Œæ•´åˆ—è¡¨ï¼šhttps://siliconflow.cn/models

### Q4: ä¸ºä»€ä¹ˆè¿˜æ˜¯æŠ¥é”™ "Unknown model"ï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. âœ… API key æ˜¯å¦æ­£ç¡®
2. âœ… baseURL æ˜¯å¦æ­£ç¡®
3. âœ… æ¨¡å‹åç§°æ˜¯å¦æ­£ç¡®ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
4. âœ… é…ç½®æ–‡ä»¶è¯­æ³•æ˜¯å¦æ­£ç¡®ï¼ˆJSON æ ¼å¼ï¼‰
5. âœ… ç½‘å…³æ˜¯å¦é‡å¯

### Q5: ç¯å¢ƒå˜é‡åœ¨å“ªé‡Œè®¾ç½®ï¼Ÿ

**A**: 
```bash
# ä¸´æ—¶è®¾ç½®ï¼ˆå½“å‰ä¼šè¯ï¼‰
export OPENAI_API_KEY="sk-ä½ çš„å¯†é’¥"

# æ°¸ä¹…è®¾ç½®ï¼ˆæ·»åŠ åˆ° ~/.bashrc æˆ– ~/.zshrcï¼‰
echo 'export OPENAI_API_KEY="sk-ä½ çš„å¯†é’¥"' >> ~/.zshrc
source ~/.zshrc
```

### Q6: å¯ä»¥åŒæ—¶é…ç½®å¤šä¸ª API æä¾›å•†å—ï¼Ÿ

**A**: å¯ä»¥ï¼ä¾‹å¦‚ï¼š
```json
{
  "agents": {
    "defaults": {
      "models": {
        "Qwen/Qwen2.5-7B-Instruct": {
          "apiKey": "${SILICONFLOW_API_KEY}",
          "baseURL": "https://api.siliconflow.cn/v1"
        },
        "gpt-4": {
          "apiKey": "${OPENAI_API_KEY}",
          "baseURL": "https://api.openai.com/v1"
        }
      }
    }
  }
}
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- ç¡…åŸºæµåŠ¨å®˜ç½‘: https://siliconflow.cn/
- æ¨¡å‹åˆ—è¡¨: https://siliconflow.cn/models
- API æ–‡æ¡£: https://docs.siliconflow.cn/
- Moltbot é…ç½®: https://docs.molt.bot/configuration
- æ¨¡å‹é…ç½®: https://docs.molt.bot/models

---

## ğŸ¯ æ¨èé…ç½®ï¼ˆå¼€ç®±å³ç”¨ï¼‰

å¦‚æœä½ åªæ˜¯æƒ³å¿«é€Ÿå¼€å§‹ï¼Œä½¿ç”¨è¿™ä¸ªé…ç½®ï¼š

```bash
# 1. è®¾ç½® API key
export OPENAI_API_KEY="sk-ä½ çš„ç¡…åŸºæµåŠ¨APIå¯†é’¥"

# 2. ä¿å­˜åˆ°æ–‡ä»¶
cat > ~/.clawdbot/moltbot.json.new << 'EOF'
{
  "meta": {
    "lastTouchedVersion": "2026.1.27-beta.1"
  },
  "agents": {
    "defaults": {
      "model": {
        "primary": "Qwen/Qwen2.5-7B-Instruct"
      },
      "models": {
        "Qwen/Qwen2.5-7B-Instruct": {
          "apiKey": "${OPENAI_API_KEY}",
          "baseURL": "https://api.siliconflow.cn/v1"
        }
      },
      "workspace": "/root/clawd"
    }
  },
  "gateway": {
    "port": 18789,
    "mode": "local",
    "bind": "loopback",
    "auth": {
      "mode": "token",
      "token": "1a1760cece3bcedbfda1f348b0671cd2d9d56f74c47a74a0"
    }
  }
}
EOF

# 3. å¤‡ä»½æ—§é…ç½®
cp ~/.clawdbot/moltbot.json ~/.clawdbot/moltbot.json.backup

# 4. åº”ç”¨æ–°é…ç½®
mv ~/.clawdbot/moltbot.json.new ~/.clawdbot/moltbot.json

# 5. é‡å¯ç½‘å…³
pkill -f "moltbot.*gateway"
nohup pnpm wukongbot gateway run --port 18789 > /tmp/wukongbot-gateway.log 2>&1 &

# 6. ç­‰å¾…å¹¶æ£€æŸ¥
sleep 5
tail -20 /tmp/wukongbot-gateway.log
```

---

**åˆ›å»ºæ—¶é—´**: 2026-01-28  
**çŠ¶æ€**: å¾…é…ç½®  
**ä¸‹ä¸€æ­¥**: è·å–ç¡…åŸºæµåŠ¨ API Key å¹¶é…ç½®
